#include <iostream>
#include <conio.h>
#include <fstream>
#include <cstdlib>
#include <cstring>
#include <stdlib.h>
#include <sstream>
#include <iomanip>
#include <string>
#define size1 30
#define size2 5
using namespace std;

const char* lin_e = "_________________________________________________________________________________________________________________________________";
const char* line = "---------------------------------------------------------------------------------------------------------------------------------";

//void Delete_All_Data();

class Club
{
public:
	

private:
	string club_conference;
	string club_division;
	string club_city;
	string club_points;
protected:
	string club_name;
	string club_name1;
	string club_budget;

	friend class Admin;
};

class Player : public Club
{
private:
	string index;
	string name;
	string name1;
	string nationality;
	string position;
	string age;
	string weight;
	string height;
	string matches;
protected:
	string price;
//	string club;
	string points;
public:
	void Set_Data();
	void Add_Data();
	void Write_Data();
	void Get_Data();
	void Read_Data();
	void Show_Data();
	friend class Function;
	friend class Admin;
	
};

class Function
{
public:
	void Search_Data();
	void Search_Int(int A);
	void Search_String(string *S);
	void Sort_Data();
private:

};

class User 
{
private:
public:
};

class Admin
{	
private:
public:
};

void Function::Search_Data()
{
	int X;
	cout << "Enter int: "; cin >> X;
	Function::Search_Int(X);
	return;
}

void Function::Search_Int(int A)
{
	
	int search = A;
	int i = 0, max;
	Player player[size1]; 
	ifstream file("basket.txt");
	if (!file)
	{
		return;
	}
	
	else
	
		while (!file.eof())
		{
			file >> player[i].index >>  player[i].name>>  player[i].name1>>  player[i].nationality >>  player[i].club_name>>player[i].club_name1 >>  player[i].age;
			file >>  player[i].position >>  player[i].weight >>  player[i].height >>  player[i].matches >>  player[i].price >>  player[i].points;
			i++;
		}

		
		max = i;
		cout << lin_e << endl;
		for (i = 0; i<max; i++)
		{
			int f = atoi( player[i].index.c_str()); // перетворення string y int

			if (f == search)
			{
				cout <<  player[i].index << '\t' << '|' << '\t' <<  player[i].name<< " " <<  player[i].name1 << '\t' << '|' << '\t' <<  player[i].nationality << '\t' << '|' << '\t';
				cout <<  player[i].club_name<<" "<<player[i].club_name1 << '\t' << '|' << '\t' <<  player[i].age << '\t' << '|' << '\t' <<  player[i].position << '\t' << '|' << '\t' <<  player[i].weight << '\t' << '|' << '\t';
				cout <<  player[i].height << '\t' << '|' << '\t' <<  player[i].matches<< '\t' << '|' << '\t' <<  player[i].price << '\t' << '|' << '\t';
				cout <<  player[i].points << '\t' << '|' << '\t' << endl;
				cout << line << endl;
			}

		}
	
	file.close();
	return;
}

void Player::Set_Data()
{
	Player player[size1];
	system("cls");
	int i, MAX = 1;

	for (i = 0; i < MAX; i++)
	{
		cout << '\n' << "New player:" << '\n' << endl;
		cout << "Enter player name:" << endl;
		cin >> player[i].name;
		cin >> player[i].name1;
		cout << "Enter nationality of player:" << endl;
		cin >> player[i].nationality;
		cout << "Enter player's club:" << endl;
		cin >> player[i].club_name;
		cin >> player[i].club_name1;
		cout << "Enter player's age:" << endl;
		cin >> player[i].age;
		cout << "Enter player's position:" << endl;
		cin >> player[i].position;
		cout << "Enter player's weight:" << endl;
		cin >> player[i].weight;
		cout << "Enter player's height:" << endl;
		cin >> player[i].height;
		cout << "Enter the number of matches played for the club:" << endl;
		cin >> player[i].matches;
		cout << "Enter player's price:" << endl;
		cin >> player[i].price;
		cout << "Enter player's points:" << endl;
		cin >> player[i].points;
		cout << '\n' << '\n' << endl;
	}
	ifstream file("basket.txt", ios_base::in);

	file.close();
	ofstream file1("basket.txt", ios::ate | ios::app);

	for (i = 0; i<MAX; ++i)
	{
		file1 << "\n" << player[i].index << "\t" << player[i].name << "\t" << player[i].name1 << "\t" << player[i].nationality;
		file1 << "\t" << player[i].club_name << "\t" << player[i].club_name1 << "\t" << player[i].age << "\t" << player[i].position << "\t" << player[i].weight;
		file1 << "\t" << player[i].height << "\t" << player[i].matches << "\t" << player[i].price << "\t" << player[i].points;
	}
	file1.close();
	return;
}

void Player::Get_Data()
{
	Player player[size1];
	system("cls");
	int max, i=0;
	ifstream file1("basket.txt", ios_base::in);
	cout << lin_e << endl;
	while (!file1.eof())
	{

		file1 >> player[i].index >> player[i].name >> player[i].name1 >> player[i].nationality >> player[i].club_name >>player[i].club_name1 >> player[i].age;
		file1 >> player[i].position >> player[i].weight >> player[i].height >> player[i].matches >> player[i].price >> player[i].points;

		cout << player[i].index << '\t' << '|' << '\t' << player[i].name << " " << player[i].name1 << '\t' << '|' << '\t' << player[i].nationality << '\t' << '|' << '\t';
		cout << player[i].club_name <<" "<<player[i].club_name1 << '\t' << '|' << '\t' << player[i].age << '\t' << '|' << '\t' << player[i].position << '\t' << '|' << '\t';
		cout << player[i].weight << '\t' << '|' << '\t' << player[i].height << '\t' << '|' << '\t' << player[i].matches << '\t' << '|' << '\t' << player[i].price << '\t' << '|' << '\t';
		cout << player[i].points << '\t' << '|' << '\t' << endl;
		cout << line << endl;
		i++;
	}

	file1.close();
	return;
}

void Player::Show_Data()
{

}

void Delete_All_Data()
{
	cout << "\nAre you sure? y/n\n";
	char x;
	cin >> x;
	cout << "\n";
	if (x == 'y')
	{
		ofstream file2("basket.txt", ios_base::trunc);
		file2.close();
	}
	else return;
}

main()
{
	Player player;
	Function function;
	int z;

M1:	cout << "\nPress [1] to add data; \nPress [2] to view data; \nPress [3] to search; \nPress [4] to delete data from file; \nPress [5] to exit;" << endl;
	cin >> z;
	cout << "\n";

	if ((z != 1) && (z != 2) && (z != 3) && (z != 4) && (z != 5) && (!cin)) { cin.clear(); cin.get(); system("cls"); cout << "You entered incorect number!" << endl; goto M1; }
	switch (z)
	{
	case 1: player.Set_Data(); goto M1; break;
	case 2: player.Get_Data(); goto M1; break;
	case 3: function.Search_Data(); goto M1; break;
	case 4: Delete_All_Data(); goto M1; break;
	case 5: cout << "BYE"; exit(EXIT_SUCCESS); break;
	}
	return 0;
}
